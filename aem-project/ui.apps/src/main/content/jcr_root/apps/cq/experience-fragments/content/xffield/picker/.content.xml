<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:granite="http://www.adobe.com/jcr/granite/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
    jcr:primaryType="nt:unstructured"
    sling:resourceType="granite/ui/components/coral/foundation/picker"
    path="${empty requestPathInfo.suffix ? (empty param.root ? &quot;/&quot; : param.root) : requestPathInfo.suffix}"
    rootPath="${empty param.root ? &quot;/&quot; : param.root}"
    selectionCount="${empty param.selectionCount ? &quot;single&quot; : param.selectionCount}"
    targetCollection="#cq-commerce-xf-picker-collection">
    <search
        jcr:primaryType="nt:unstructured"
        name="fulltext"
        targetCollection="#cq-commerce-xf-picker-search-collection">
        <form jcr:primaryType="nt:unstructured">
            <rootpath
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/form/pathfield"
                fieldLabel="Path"
                name="path"
                rootPath="${empty requestPathInfo.suffix ? &quot;/content/experience-fragments&quot; : requestPathInfo.suffix}"
                value="/content/experience-fragments"/>
            <tagid
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/gui/components/coral/common/form/tagfield"
                allowCreate="false"
                fieldLabel="Tags"
                multiple="true"
                name="tagid"/>
            <tagid-property
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/form/hidden"
                name="tagid.property"
                value="jcr:content/cq:tags"/>
            <resourcetype-xf
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/xfhidden"
                metaType="hidden"
                name="group.1_property"
                value="jcr:content/sling:resourceType"
                xfType="xf"/>
            <resourcetype-xf-value
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/xfhidden"
                metaType="hidden"
                name="group.1_property.1_value"
                value="cq/experience-fragments/components/experiencefragment"
                xfType="xf"/>
            <resourcetype-variant
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/xfhidden"
                metaType="hidden"
                name="group.2_property"
                value="jcr:content/sling:resourceType"
                variant="web"
                xfType="variant"/>
            <resourcetype-variant-value
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/xfhidden"
                metaType="hidden"
                name="group.2_property.1_value"
                value="cq/experience-fragments/components/xfpage"
                variant="web"
                xfType="variant"/>
            <resourcetype-variant-facebook
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/xfhidden"
                metaType="hidden"
                name="group.3_property"
                value="jcr:content/sling:resourceType"
                variant="facebook"
                xfType="variant"/>
            <resourcetype-variant-facebook-value
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/xfhidden"
                metaType="hidden"
                name="group.3_property.1_value"
                value="cq/experience-fragments/components/xffacebook"
                variant="facebook"
                xfType="variant"/>
            <resourcetype-variant-pinterest
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/xfhidden"
                metaType="hidden"
                name="group.4_property"
                value="jcr:content/sling:resourceType"
                variant="pinterest"
                xfType="variant"/>
            <resourcetype-variant-pinterest-value
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/xfhidden"
                metaType="hidden"
                name="group.4_property.1_value"
                value="cq/experience-fragments/components/xfpinterest"
                variant="pinterest"
                xfType="variant"/>
            <resourcetype-variant-pos
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/xfhidden"
                metaType="hidden"
                name="group.5_property"
                value="jcr:content/sling:resourceType"
                variant="pos"
                xfType="variant"/>
            <resourcetype-variant-pos-value
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/xfhidden"
                metaType="hidden"
                name="group.5_property.1_value"
                value="cq/experience-fragments/components/xfpos"
                variant="pos"
                xfType="variant"/>
            <resourcetype-group-or
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/form/hidden"
                metaType="hidden"
                name="group.p.or"
                value="true"/>
            <nodetype
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/form/hidden"
                metaType="hidden"
                name="1_property"
                value="jcr:primaryType"/>
            <nodetype-page
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/form/hidden"
                metaType="hidden"
                name="1_property.1_value"
                value="cq:Page"/>
            <charset
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/form/hidden"
                name="_charset_"
                value="utf-8"/>
        </form>
        <views jcr:primaryType="nt:unstructured">
            <card
                granite:id="cq-commerce-xf-picker-collection"
                jcr:primaryType="nt:unstructured"
                jcr:title="Card View"
                sling:resourceType="granite/ui/components/coral/foundation/masonry"
                icon="viewCard"
                limit="{Long}20"
                selectionCount="${requestPathInfo.selectors[1]}"
                selectionMode="{Boolean}true"
                size="${empty requestPathInfo.selectors[3] ? &quot;20&quot; : requestPathInfo.selectors[3]}"
                src="/mnt/overlay/cq/experience-fragments/content/xffield/picker/search/views/card.result.${requestPathInfo.selectors[1]}{.offset,limit}.html?${querystring}">
                <datasource
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/coral/foundation/querybuilder/datasource"
                    itemResourceType="cq/experience-fragments/editor/components/xffield/card"
                    limit="${empty requestPathInfo.selectors[3] ? &quot;21&quot; : requestPathInfo.selectors[3] + 1}"
                    offset="${requestPathInfo.selectors[2]}"/>
            </card>
        </views>
    </search>
    <views jcr:primaryType="nt:unstructured">
        <column
            granite:id="cq-commerce-xf-picker-collection"
            jcr:primaryType="nt:unstructured"
            jcr:title="Column View"
            sling:resourceType="granite/ui/components/coral/foundation/columnview"
            icon="viewColumn"
            limit="{Long}40"
            loadAncestors="{Boolean}true"
            path="${empty requestPathInfo.suffix ? (empty param.root ? &quot;/&quot; : param.root) : requestPathInfo.suffix}"
            previewSrc="/mnt/overlay/wcm/core/content/sites/pagecolumnpreview.html{+id}"
            rootPath="${empty param.root ? &quot;/&quot; : param.root}"
            selectionCount="${empty param.selectionCount ? &quot;single&quot; : param.selectionCount}"
            size="${empty requestPathInfo.selectors[1] ? &quot;40&quot; : requestPathInfo.selectors[1]}"
            src="/mnt/overlay/cq/experience-fragments/content/xffield/picker/views/column{.offset,limit}.html{+id}?root=${granite:encodeURIComponent(empty param.root ? &quot;/&quot; : param.root)}&amp;selectionCount=${granite:encodeURIComponent(param.selectionCount)}&amp;filter=${granite:encodeURIComponent(param.filter)}&amp;variant=${granite:encodeURIComponent(param.variant)}">
            <datasource
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/datasources/children"
                filter="${param.filter}"
                itemResourceType="cq/experience-fragments/editor/components/xffield/column"
                limit="${empty requestPathInfo.selectors[1] ? &quot;41&quot; : requestPathInfo.selectors[1] + 1}"
                offset="${requestPathInfo.selectors[0]}"
                path="${empty requestPathInfo.suffix ? (empty param.root ? &quot;/&quot; : param.root) : requestPathInfo.suffix}"
                variant="${param.variant}"/>
        </column>
        <card
            granite:id="cq-commerce-xf-picker-collection"
            jcr:primaryType="nt:unstructured"
            jcr:title="Card View"
            sling:resourceType="granite/ui/components/coral/foundation/masonry"
            icon="viewCard"
            limit="{Long}40"
            loadAncestors="{Boolean}true"
            metaResourceType="cq/gui/components/coral/admin/page/meta"
            path="${empty requestPathInfo.suffix ? (empty param.root ? &quot;/&quot; : param.root) : requestPathInfo.suffix}"
            rootPath="${empty param.root ? &quot;/&quot; : param.root}"
            selectionCount="${empty param.selectionCount ? &quot;single&quot; : param.selectionCount}"
            size="${empty requestPathInfo.selectors[1] ? &quot;20&quot; : requestPathInfo.selectors[1]}"
            src="/mnt/overlay/cq/experience-fragments/content/xffield/picker/views/card{.offset,limit}.html{+id}?root=${granite:encodeURIComponent(empty param.root ? &quot;/&quot; : param.root)}&amp;selectionCount=${granite:encodeURIComponent(param.selectionCount)}&amp;filter=${granite:encodeURIComponent(param.filter)}&amp;variant=${granite:encodeURIComponent(param.variant)}">
            <datasource
                jcr:primaryType="nt:unstructured"
                sling:resourceType="cq/experience-fragments/editor/components/xffield/datasources/children"
                filter="${param.filter}"
                itemResourceType="cq/experience-fragments/editor/components/xffield/card"
                limit="${empty requestPathInfo.selectors[1] ? &quot;21&quot; : requestPathInfo.selectors[1] + 1}"
                offset="${requestPathInfo.selectors[0]}"
                path="${empty requestPathInfo.suffix ? (empty param.root ? &quot;/&quot; : param.root) : requestPathInfo.suffix}"
                variant="${param.variant}"/>
        </card>
    </views>
</jcr:root>
