<header class="search-results-header">
    <form id="submitForm" name="submitForm" method="get" onsubmit="return validateForm();">
        <fieldset>
            <div class="search-input-m-glass">
                <input type="text" id="q" class="st-default-search-input" value="">
            </div>
            <select name="label" title="Search in" onchange="return validateForm();">
                <option value="all" selected="selected">All Results</option>
                <option value="corporate">Corporate</option>
                <option value="communities">Communities</option>
                <option value="documentation">Documentation</option>
                <option value="marketplace">Marketplace</option>
                <option value="productsSolutions">Products/Solutions</option>
                <option value="services">Services</option>
                <option value="education">Education</option>
                <option value="blogs">Blogs</option>
                <option value="news">News</option>
            </select>
        </fieldset>
    </form>
</header>
<script>
    if (document.location.search.indexOf('q=') >= 0 || document.location.search.indexOf('keywords=') >= 0) {
        validateForm();
    }

    function validateForm() {
        var stq = encodeURIComponent(document.getElementById('q').value);
        document.getElementById("submitForm").action = "#stq=" + stq;
        document.getElementById("submitForm").submit();
    }
</script>
<div class="st-search-container">
</div>

<sly data-sly-use.SearchResultsModel="com.bmc.models.components.search.SearchResultsModel"/>

<sly data-sly-test.PageLocale="${SearchResultsModel.PageLocale}">
    ${PageLocale}
</sly>
<script type="text/javascript">
    (function(w, d, t, u, n, s, e) {
        w['SwiftypeObject'] = n;
        w[n] = w[n] || function() {
            (w[n].q = w[n].q || []).push(arguments);
        };
        s = d.createElement(t);
        e = d.getElementsByTagName(t)[0];
        s.async = 1;
        s.src = u;
        e.parentNode.insertBefore(s, e);
    })(window, document, 'script', '//s.swiftypecdn.com/install/v2/st.js', '_st');

    _st('install', 'V19U4iKAzwWhzxzh8cxY', '2.0.0', {
        install: {
            hooks: {
                query_filter: function(query) {
                    //query.setFilterDataByDocumentTypeSlugAndFilterField('page', 'FIELD_NAME', { values: ['VALUE1', 'VALUE2'], type: "and" });
                    query.setFilterDataByDocumentTypeSlugAndFilterField('page', 'source', {
                        values: ['en-us', 'newsroom', 'docs', 'marketplace', 'communities'],
                        type: "or"
                    });
                    return query;
                }
            }
        }
    });
</script>
